<?xml version="1.0" encoding="UTF-8" ?>
<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0"
    xmlns:android="http://schemas.android.com/apk/res/android"
    id="org.thaliproject.p2p"
    version="0.0.1">
    <name>Thali</name>
    <description>ThaliPlugin to be used on top of JXcore</description>
    <license>MIT</license>
    <keywords>cordova,jxcore,node.js,thali</keywords>
    <dependency id="io.jxcore.node" url="../jxcore-cordova" 
        commit="0.0.3-release"/>
    <engines>
        <engine name="cordova-android" version=">=3.2.0" />
        <engine name="android-sdk" version=">=19" />
    </engines>

    <!-- Android -->
    <platform name="android">
        <config-file target="AndroidManifest.xml" parent="/*">
            <uses-permission android:name="android.permission.INTERNET" />
            <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
            <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        </config-file>
        <framework src="src/android/JXcore.gradle" custom="true" type="gradleReference" />
        <source-file src="src/android/java/io/jxcore/node/BtToRequestSocket.java" target-dir="src/io/jxcore/node/" />
        <source-file src="src/android/java/io/jxcore/node/BtToServerSocket.java" target-dir="src/io/jxcore/node/" />
        <source-file src="src/android/java/io/jxcore/node/StreamCopyingThread.java" target-dir="src/io/jxcore/node/" />
        <source-file src="src/android/java/io/jxcore/node/BtConnectorHelper.java" target-dir="src/io/jxcore/node/" />
        <source-file src="src/android/java/io/jxcore/node/ConnectivityMonitor.java" target-dir="src/io/jxcore/node/" />
        <source-file src="src/android/java/io/jxcore/node/LifeCycleMonitor.java" target-dir="src/io/jxcore/node/" />
        <source-file src="src/android/java/io/jxcore/node/BtSocketDisconnectedCallBack.java" target-dir="src/io/jxcore/node/" />
        <hook type="after_prepare" src="scripts/androidAfterPrepare.js"/>
    </platform>

    <!-- iOS -->
    <platform name="ios">
        <config-file target="config.xml" parent="/*">
        </config-file>
        <framework src="MultipeerConnectivity.framework" />
        <framework src="CoreBluetooth.framework" />
        <framework src="SystemConfiguration.framework" />
        <source-file src="src/ios/JXcoreExtension.m" />
        <header-file src="src/ios/Utility/THEThreading.h" />
        <header-file src="src/ios/Utility/THEAtomicFlag.h" />
        <source-file src="src/ios/Utility/THEAtomicFlag.m" />
        <header-file src="src/ios/NPReachability/NPReachability.h" />
        <source-file src="src/ios/NPReachability/NPReachability.m" />
        <header-file src="src/ios/THEThaliCore.h" />
        <source-file src="src/ios/THEThaliCore.m" />
        <header-file src="src/ios/THEAppContext.h" />
        <source-file src="src/ios/THEAppContext.m" />
        <header-file src="src/ios/THEPeer.h" />
        <source-file src="src/ios/THEPeer.m" />
        <header-file src="src/ios/THEPeerBluetoothDelegate.h" />
        <header-file src="src/ios/THEPeerBluetooth.h" />
        <source-file src="src/ios/THEPeerBluetooth.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerSession.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerSession.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerSessionDelegate.h" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerClient.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerClient.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerServer.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerServer.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerPeerSession.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerPeerSession.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerClientSession.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerClientSession.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerServerSession.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerServerSession.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerSocketRelay.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerSocketRelay.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerClientSocketRelay.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerClientSocketRelay.m" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerClientSocketRelayDelegate.h" />
        <header-file src="src/ios/MultipeerConnectivity/THEMultipeerServerSocketRelay.h" />
        <source-file src="src/ios/MultipeerConnectivity/THEMultipeerServerSocketRelay.m" />
        <header-file src="src/ios/GCDAsyncSocket/GCDAsyncSocket.h" />
        <source-file src="src/ios/GCDAsyncSocket/GCDAsyncSocket.m" />
        <header-file src="src/ios/Utility/THEProtectedMutableDictionary.h" />
        <source-file src="src/ios/Utility/THEProtectedMutableDictionary.m" />
    </platform>
</plugin>
